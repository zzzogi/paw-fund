<!DOCTYPE html>
<html lang="en">
  <!-- Mirrored from themeslay.com/preview/items/HTML-Websites/TravelAgency/ver3.0/dashboard.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 17 Oct 2024 17:09:12 GMT -->
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="" />
    <meta name="author" content="ThemesLay" />

    <!-- Favicon -->
    <link
      rel="icon"
      type="image/png"
      sizes="16x16"
      href="assets/images/favicon.png"
    />

    <!-- Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />

    <!-- Main CSS -->
    <link href="assets/css/main.css" rel="stylesheet" />

    <!-- Inner page CSS -->
    <link href="assets/css/inner.css" rel="stylesheet" />

    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

    <!-- SweetAlert -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- Ionicons (Using ES Module for better performance) -->
    <script
      type="module"
      src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.esm.js"
    ></script>
    <script
      nomodule
      src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons/ionicons.js"
    ></script>

    <!-- Main JS -->
    <script src="assets/js/main.js"></script>

    <!-- Page Title -->
    <title>Dashboard</title>
  </head>

  <body>
    <!-- modal box for Logout Profile-->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="p-5 text-center">
            <h3 class="fs-2 fw-bold">
              Are you sure?
              <br />
              you want to log out.
            </h3>
            <p class="font-medium">You have successfully logged out.</p>
            <a data-bs-dismiss="modal" class="btn btn-view min-h-auto">
              <span class="fw-bold">Yes Confirm</span>
            </a>
            <a
              data-bs-dismiss="modal"
              class="btn border theme-border-radius effect ms-3"
              >No Cancel <i class="bi bi-arrow-right ms-2"></i
            ></a>
          </div>
        </div>
      </div>
    </div>
    <!-- page content area -->
    <div class="pagewrap">
      <div class="container">
        <div class="row">
          <div class="col-12">
            <div
              class="breadcrumb-content"
              style="display: flex; justify-content: space-around"
            >
              <h2>Admin Dashboard</h2>
              <h4>
                <a style="color: black" href="index.html"
                  ><ion-icon size="large" name="home"></ion-icon
                ></a>
              </h4>
            </div>
          </div>
        </div>
      </div>
      <!-- body section -->
      <div class="content-section">
        <!-- dashboard section -->
        <div class="py-5">
          <div class="container">
            <div class="row">
              <!-- dashboard nav section -->
              <div class="col-12 col-md-3">
                <div
                  class="d-flex flex-column theme-border-radius theme-bg-white theme-box-shadow"
                >
                  <div class="d-flex flex-column p-3">
                    <span class="text-center mb-3 profile-pic">
                      <img
                        src="assets/images/icons/profile-icon.png"
                        alt="Profile Pic"
                        title="Profile Pic"
                      />
                      <a href="#" class="edit-btn"
                        ><i class="bi bi-pencil p-3"></i
                      ></a>
                    </span>
                    <span class="font-medium text-center">Kislay Chhimwal</span>
                    <span class="font-small text-center">Personal Profile</span>
                  </div>
                  <ul id="dashboard">
                    <li>
                      <a
                        href="dashboard.html"
                        class="border-bottom p-3 theme-text-accent-one"
                        ><i class="bi bi-speedometer fs-4 me-2 align-middle"></i
                        >Dashboard</a
                      >
                    </li>
                    <li>
                      <a
                        href="manage_shelter.html"
                        class="border-bottom p-3 theme-text-accent-one"
                        ><i class="bi bi-speedometer fs-4 me-2 align-middle"></i
                        >Manage Shelter</a
                      >
                    </li>
                    <li>
                      <a
                        href="manage_donation.html"
                        class="border-bottom p-3 theme-text-accent-one"
                        ><i class="bi bi-card-list fs-4 me-2 align-middle"></i
                        >Manage the Donation</a
                      >
                    </li>
                    <li>
                      <a
                        href="manage_pet.html"
                        class="border-bottom p-3 theme-text-accent-one"
                        ><i class="bi bi-card-list fs-4 me-2 align-middle"></i
                        >Manage the Pet</a
                      >
                    </li>

                    <li>
                      <a
                        href="notification.html"
                        class="border-bottom p-3 theme-text-accent-one"
                        ><i class="bi bi-bell fs-4 me-2 align-middle"></i
                        >Notification</a
                      >
                    </li>
                    <li>
                      <a
                        href="#"
                        class="border-bottom p-3 theme-text-accent-one logout-btn"
                      >
                        <i
                          class="bi bi-box-arrow-right fs-4 me-2 align-middle"
                        ></i
                        >Logout
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <!-- dashboard content section -->
              <div class="col-12 col-md-9">
                <div
                  class="d-flex align-self-center justify-content-center align-items-center mb-5"
                >
                  <!-- <h3 class="display-6 mb-0">Welcome to <span class="high-text">Dashboard</span></h3> -->
                </div>

                <!-- recent booking section -->
                <div
                  class="d-flex flex-column theme-border-radius theme-bg-white theme-box-shadow"
                >
                  <!-- my wallet section -->
                  <div class="d-flex justify-content-between p-3 wallet-head">
                    <span class="text-uppercase fw-bold">Manage Shelter</span>
                  </div>
                  <!-- my shelter section -->

                  <div class="p-3">
                    <div class="tble_wrap">
                      <div class="table-responsive">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                              <th style="color: black; display: none">ID</th>
                              <th style="color: black">Name</th>
                              <th style="color: black">Location</th>
                              <th style="color: black; display: none">Description</th>
                              <th style="color: black">Phone Number</th>
                              <th style="color: black">Email</th>
                              <th style="color: black">Action</th>
                            </tr>
                          </thead>
                          <tbody id="shelterTableBody">
                            <!-- Rows will be appended here dynamically -->
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <!-- pagination -->
                    <div class="row">
                      <div class="col-12 mt-3">
                        <nav aria-label="Page navigation example">
                          <ul
                            class="pagination justify-content-center"
                            id="pagination"
                          >
                            <!-- Pagination items will be appended dynamically -->
                          </ul>
                        </nav>
                      </div>
                    </div>
                  </div>
                </div>



              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
                <!-- phân trang và get all shelter -->
     <!-- <script>
      $(document).ready(function () {
        // AJAX GET request to fetch shelter data
        $.ajax({
          url: "https://localhost:7063/api/Shelter/all-shelter",
          method: "GET",
          dataType: "json",
          success: function (response) {
            const shelters = response.data; // Assuming response.data contains the shelter array
            const tableBody = $("#shelterTableBody");

            // Clear the table body
            tableBody.empty();

            // Iterate through shelters and append rows
            shelters.forEach((shelter) => {
              const row = `
               
                    <tr> 
                         
                        <td style="display: none;">${shelter.shelterId}</td>
                        <td>${shelter.shelterName}</td>
                        <td>${shelter.address}</td>
                        <td>${shelter.description}</td>
                        <td>${shelter.phoneNumber}</td>
                        <td>${shelter.email}</td>
                        <td>
                         <a href="manage_shelter_details.html?shelterId=${shelter.shelterId}" class="item-click"> View </a> |
                            <a style="color: red;" href="#">Disable</a>
                        </td>
                        
                    </tr> 
                `;
              tableBody.append(row);
            });
          },
          error: function (error) {
            console.error("Error fetching shelter data:", error);
          },
        });
      });
    </script> -->
 

<script>
    $(document).ready(function () {
  const itemsPerPage = 3; // Số lượng shelter trên mỗi trang
  let currentPage = 1;
  let totalPages = 1;
  let shelters = []; // Danh sách shelter

  // Hàm hiển thị bảng
  function renderTable(page) {
    const start = (page - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    const paginatedShelters = shelters.slice(start, end);
    const tableBody = $("#shelterTableBody");

    // Xóa dữ liệu cũ
    tableBody.empty();

    // Tạo hàng mới
    paginatedShelters.forEach((shelter) => {
      const row = `
        <tr>
          <td style="display: none;">${shelter.shelterId}</td>
          <td>${shelter.shelterName}</td>
          <td>${shelter.address}</td>
          <td style="display: none">${shelter.description}</td>
          <td>${shelter.phoneNumber}</td>
          <td>${shelter.email}</td>
          <td>
            <a href="manage_shelter_details.html?shelterId=${shelter.shelterId}" class="item-click">View</a> |
            <a style="color: red;" href="#">Disable</a>
          </td>
        </tr>
      `;
      tableBody.append(row);
    });

    updatePagination(page);
  }

  // Hàm cập nhật phân trang
  function updatePagination(page) {
    const pagination = $("#pagination");
    pagination.empty();

    // Nút trang trước
    const prevDisabled = page === 1 ? "disabled" : "";
    pagination.append(`
      <li class="page-item ${prevDisabled}">
        <a class="page-link" href="#" data-page="${page - 1}">
          <i class="bi bi-arrow-left">◀</i>
        </a>
      </li>
    `);

    // Các nút số trang
    for (let i = 1; i <= totalPages; i++) {
      const active = i === page ? "active" : "";
      pagination.append(`
        <li class="page-item ${active}">
          <a class="page-link" href="#" data-page="${i}">${i}</a>
        </li>
      `);
    }

    // Nút trang sau
    const nextDisabled = page === totalPages ? "disabled" : "";
    pagination.append(`
      <li class="page-item ${nextDisabled}">
        <a class="page-link" href="#" data-page="${page + 1}">
          <i class="bi bi-arrow-right">▶</i>
        </a>
      </li>
    `);

    // Thêm sự kiện click cho nút phân trang
    $(".page-link").on("click", function (e) {
      e.preventDefault();
      const newPage = parseInt($(this).data("page"));
      if (!isNaN(newPage)) {
        currentPage = newPage;
        renderTable(currentPage);
      }
    });
  }

  // Hàm khởi tạo bảng
  function initializeTable(responseData) {
    shelters = responseData;
    totalPages = Math.ceil(shelters.length / itemsPerPage);
    renderTable(currentPage);
  }

  // Fetch dữ liệu shelter
  function fetchShelters() {
    $.ajax({
      url: "https://localhost:7063/api/Shelter/all-shelter",
      method: "GET",
      dataType: "json",
      success: function (response) {
        initializeTable(response.data); // Giả định response.data chứa danh sách shelter
      },
      error: function (error) {
        console.error("Error fetching shelter data:", error);
      },
    });
  }

  // Gọi hàm fetchShelters khi tài liệu đã sẵn sàng
  fetchShelters();
});

</script>


   <!-- LOG OUT -->

   <script>
    // Attach an event listener to the "Yes Confirm" button
    $(document).ready(function () {
      // Handle logout button click
      $(".logout-btn").on("click", function (event) {
        event.preventDefault();

        // Clear session storage
        sessionStorage.removeItem("token");
        sessionStorage.removeItem("userId");
        sessionStorage.removeItem("role");

        // Optionally clear cookies or localStorage if used
        localStorage.clear(); // Uncomment if localStorage is also used

        // Notify the user and redirect to the login page
        Swal.fire({
          icon: "success",
          title: "Logged Out",
          text: "You have successfully logged out!",
          showConfirmButton: false,
          timer: 1500,
        }).then(() => {
          window.location.href = "login.html"; // Redirect to login page
        });
      });
    });
  </script>

</body>
</html>
