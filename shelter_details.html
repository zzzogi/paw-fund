<!DOCTYPE html>
<html lang="en">
  <!-- Mirrored from www.shmai.com/preview/PawFund-html/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Tue, 26 Nov 2024 06:50:36 GMT -->
  <head>
    <meta charset="utf-8" />
    <title>PawFund</title>
    <!-- Stylesheets -->
    <link href="css/bootstrap.min.css" rel="stylesheet" />
    <link
      href="plugins/revolution/css/settings.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- REVOLUTION SETTINGS STYLES -->
    <link
      href="plugins/revolution/css/layers.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- REVOLUTION LAYERS STYLES -->
    <link
      href="plugins/revolution/css/navigation.css"
      rel="stylesheet"
      type="text/css"
    />
    <!-- REVOLUTION NAVIGATION STYLES -->
    <link href="css/style.css" rel="stylesheet" />
    <link href="css/responsive.css" rel="stylesheet" />
    <!--Color Switcher Mockup-->
    <link href="css/color-switcher-design.css" rel="stylesheet" />
    <!--Color Themes-->
    <link
      id="theme-color-file"
      href="css/color-themes/default-theme.css"
      rel="stylesheet"
    />
    <!--Favicon-->
    <link rel="shortcut icon" href="images/favicon.png" type="image/x-icon" />
    <link rel="icon" href="images/favicon.png" type="image/x-icon" />

    <!-- Responsive -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv.js"></script>
    <script src="https://unpkg.com/ionicons@4.5.10-0/dist/ionicons.js"></script>
    <!--[if lt IE 9]><script src="js/respond.js"></script><![endif]-->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery.js"></script>
    <!--Revolution Slider-->
    <script src="plugins/revolution/js/jquery.themepunch.revolution.min.js"></script>
    <script src="plugins/revolution/js/jquery.themepunch.tools.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.actions.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.carousel.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.kenburn.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.layeranimation.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.migration.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.navigation.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.parallax.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.slideanims.min.js"></script>
    <script src="plugins/revolution/js/extensions/revolution.extension.video.min.js"></script>
    <script src="js/main-slider-script.js"></script>

    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="js/jquery.fancybox.js"></script>
    <script src="js/owl.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/wow.min.js"></script>
    <script src="js/appear.js"></script>
    <script src="js/gallery.js"></script>

    <script src="js/script.js"></script>
    <script src="js/color-settings.js"></script>
  </head>
  <style>
    a {
      text-decoration: none;
    }
  </style>
  <body>
    <div class="page-wrapper">
      <!-- Preloader -->
      <!-- <div class="preloader"></div> -->
      <!-- Main Header-->
      <header class="main-header">
        <!-- =========================================== MENU NGANG ========================================================= -->
        <!-- Header Upper -->
        <div class="header-upper">
          <div
            class="container d-flex align-items-center justify-content-between"
          >
            <!-- Logo Section -->
            <div class="logo-outer">
              <a href="index.html">
                <img
                  src="images/Paw.png"
                  alt="Logo"
                  class="logo"
                  style="width: 100px; height: auto"
                />
              </a>
            </div>

            <!-- Navigation Menu -->
            <nav class="main-menu">
              <button
                class="navbar-toggle d-lg-none"
                data-bs-toggle="collapse"
                data-bs-target="#navbarMenu"
              >
                <span><i class="fa fa-bars"></i></span>
              </button>
              <div id="navbarMenu" class="navbar-collapse collapse">
                <ul class="navigation d-flex align-items-center">
                  <li class="nav-item">
                    <a href="index.html" class="nav-link">Home</a>
                  </li>
                  <li class="nav-item">
                    <a href="about.html" class="nav-link">About</a>
                  </li>
                  <li class="nav-item">
                    <a href="shelter.html" class="nav-link">Shelter</a>
                  </li>
                  <li class="nav-item">
                    <a href="pets.html" class="nav-link">Pets</a>
                  </li>
                  <li class="nav-item">
                    <a href="events.html" class="nav-link">Events</a>
                  </li>
                  <li class="nav-item dropdown">
                    <ion-icon name="contact" size="large"></ion-icon>
                    <ul class="dropdown-menu">
                      <li>
                        <a href="login.html" class="dropdown-item">Login</a>
                      </li>
                      <li>
                        <a href="register.html" class="dropdown-item"
                          >Register</a
                        >
                      </li>
                      <li>
                        <a href="user_profile.html" class="dropdown-item"
                          >My Profile</a
                        >
                      </li>
                      <li id="management" style="display: none">
                        <a href="#" class="dropdown-item">Dashboard</a>
                      </li>
                    </ul>
                  </li>
                </ul>
              </div>
            </nav>
          </div>
        </div>
      </header>

      <!-- =========================================== MENU NGANG ========================================================= -->

      <!-- =====================================================Shelter Detail===================== -->
      <section
        class="page-title"
        style="background-image: url(images/background/7.jpg)"
      >
        <div class="auto-container">
          <div class="clearfix">
            <div class="pull-left">
              <h1>Shelter Detail</h1>
            </div>
            <div class="pull-right">
              <ul class="page-breadcrumb">
                <li><a href="index.html">Home</a></li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <div id="shelter-details" class="sidebar-page-container">
        <div class="sidebar-page-container">
          <div class="auto-container">
            <div class="row clearfix">
              <section class="detail-desc">
                <div class="container white-shadow">
                  <div class="row bottom-mrg">
                    <div class="col-md-8 col-sm-8">
                      <div class="detail-desc-caption">
                        <h4>${shelterName}</h4>
                        <p>${description}</p>
                        <ul>
                          <li>
                            <i class="fa fa-envelope"></i
                            ><span>${userName}</span>
                          </li>
                          <li>
                            <i class="fa fa-envelope"></i
                            ><span>${shelterDate}</span>
                          </li>
                        </ul>
                      </div>
                    </div>
                    <div class="col-md-4 col-sm-4">
                      <div class="get-touch">
                        <h4>Contact</h4>
                        <ul>
                          <li>
                            <i class="fa fa-map-marker"></i
                            ><span>${address}</span>
                          </li>
                          <li>
                            <i class="fa fa-phone"></i><span>${phone}</span>
                          </li>
                          <li>
                            <i class="fa fa-envelope"></i><span>${email}</span>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="row no-padd">
                    <div class="detail pannel-footer">
                      <div class="col-md-7 col-sm-7">
                        <div class="detail-pannel-footer-btn pull-right">
                          <a href="" class="theme-btn btn-style-three" title=""
                            >Donate to Shelter</a
                          >
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </section>
            </div>
          </div>
        </div>
      </div>

      <!-- =====================================================Shelter Detail EMD===================== -->

      <section
        class="news-section"
        style="background-image: url(images/background/5.jpg)"
      >
        <div class="auto-container">
          <!--Sec Title-->
          <div class="sec-title centered">
            <h2>Pet Shelter</h2>
          </div>
          <div class="row clearfix">
            <!--News Block-->
            <div class="news-block col-md-4 col-sm-6 col-xs-12">
              <div
                class="inner-box wow fadeInUp"
                data-wow-duration="1000ms"
                data-wow-delay="0ms"
              >
                <div class="image">
                  <a href="blog-single.html"
                    ><img
                      src="images/gallery/15_353WNorthwestHwy_Barrington_IL_Small.jpg"
                      alt=""
                  /></a>
                </div>
                <div class="lower-content"></div>
              </div>
            </div>
            <!--News Block-->
            <div class="news-block col-md-4 col-sm-6 col-xs-12">
              <div
                class="inner-box wow fadeInUp"
                data-wow-duration="2000ms"
                data-wow-delay="0ms"
              >
                <div class="image">
                  <a href="blog-single.html"
                    ><img src="images/gallery/Animal_care_VABC_4.jpg" alt=""
                  /></a>
                </div>
                <div class="lower-content"></div>
              </div>
            </div>
            <!--News Block-->
            <div class="news-block col-md-4 col-sm-6 col-xs-12">
              <div
                class="inner-box wow fadeInUp"
                data-wow-duration="3000ms"
                data-wow-delay="0ms"
              >
                <div class="image">
                  <a href="blog-single.html"
                    ><img
                      src="images/gallery/Gaston-Cty-Animal-CE_dog-kennels.jpg"
                      alt=""
                  /></a>
                </div>
                <div class="lower-content"></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- =====================================================List of Pets===================== -->
      <div id="pet-list" class="pet about second">
        <!-- <div class="pet about second">
            <section class="team">
                <div class="container">
                    <div class="heading text-center">
                        <p class="wow fadeInUp"><span class="purple"><i class="fas fa-paw"></i> </span><span
                                class="orange"><i class="fas fa-paw"></i> </span><span class="purple"><i
                                    class="fas fa-paw"></i> </span></p>
                        <h2 class="wow fadeInDown">List of <span class="wow pulse" data-wow-delay="1s">
                                Pets</span>
                        </h2>
                    </div>
                    <div class="row">
                        <div class="col-lg-4 col-md-6 col-sm-12">
                            <div class="member">
                                <h4 class="wow fadeInDown">${name}</h4>
                                <div class="image">
                                    <img src="images/home_5/pet-1.png" alt="image of pet" title="pet"
                                        class="img-fluid customer">
                                </div>
                                <div class="content">
                                  
                                    <ul>
                                        <li><i class="fas fa-paw"></i>${ages}</li>
                                        <li><i class="fas fa-paw"></i>${gender} </li>
                                        <li><i class="fas fa-paw"></i>${breed} </li>
                                        <li><i class="fas fa-paw"></i>${description}</li>
                                        
                                    </ul>

                                    <div class="button wow fadeInUp">
                                        <a href="pet-profile.html" class="btn main" style="color: black;" title="contact">
                                            Adopt me <i class="fas fa-paw"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                          
                    </div>
                </div>
            </section>
         
        </div> -->
      </div>

      <!-- phân trang -->
      <div id="pet-list" class="pet about second">
        <section class="team">
          <div class="container">
            <div class="heading text-center">
              <p class="wow fadeInUp">
                <span class="purple"><i class="fas fa-paw"></i></span>
                <span class="orange"><i class="fas fa-paw"></i></span>
                <span class="purple"><i class="fas fa-paw"></i></span>
              </p>
              <h2 class="wow fadeInDown">
                List of <span class="wow pulse" data-wow-delay="1s">Pets</span>
              </h2>
            </div>
            <div class="row" id="pet-container">
              <!-- Pet cards will be dynamically loaded here -->
            </div>
            <nav aria-label="Page navigation" class="mt-4">
              <ul class="pagination justify-content-center" id="pagination">
                <!-- Pagination items will be dynamically added here -->
              </ul>
            </nav>
          </div>
        </section>
      </div>
    </div>
    <!-- =====================================================List of Pets END===================== -->

    <!--Main Footer-->
    <footer class="main-footer">
      <div class="auto-container">
        <!--Widgets Section-->
        <div class="widgets-section">
          <div class="row clearfix">
            <!--big column-->
            <div class="big-column col-md-6 col-sm-12 col-xs-12">
              <div class="row clearfix">
                <!--Footer Column-->
                <div class="footer-column col-md-7 col-sm-6 col-xs-12">
                  <div class="footer-widget logo-widget">
                    <div class="logo">
                      <a href="index.html">
                        <img src="images/Paw.png" width="50%" alt="" title="" />
                      </a>
                    </div>
                    <div class="text">
                      This prodigiously grew tortoise charact stupidly
                      pernicious jeepers along while accordingly under useful
                      much salacious walking fars before some supp aesthetically
                      wow shuddered.
                    </div>
                    <ul class="social-icon-two">
                      <li>
                        <a href="#"><span class="fa fa-twitter"></span></a>
                      </li>
                      <li>
                        <a href="#"
                          ><span class="fa fa-facebook-square"></span
                        ></a>
                      </li>
                      <li>
                        <a href="#"><span class="fa fa-google-plus"></span></a>
                      </li>
                      <li>
                        <a href="#"><span class="fa fa-youtube-play"></span></a>
                      </li>
                      <li>
                        <a href="#"><span class="fa fa-pinterest-p"></span></a>
                      </li>
                    </ul>
                  </div>
                </div>
                <!--Footer Column-->
                <div class="footer-column col-md-5 col-sm-6 col-xs-12">
                  <div class="footer-widget links-widget">
                    <h2>Web Links</h2>
                    <ul class="links">
                      <li><a href="index.html">Home Page</a></li>
                      <li><a href="about.html">About us</a></li>
                      <li><a href="services.html">Our Services</a></li>
                      <li><a href="blog.html">Our News</a></li>
                      <li><a href="contact.html">Contact Us</a></li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <!--big column-->
            <div class="big-column col-md-6 col-sm-12 col-xs-12">
              <div class="row clearfix">
                <!--Footer Column-->
                <div class="footer-column col-md-6 col-sm-6 col-xs-12">
                  <div class="footer-widget info-widget">
                    <h2>Get In Touch</h2>
                    <ul>
                      <li>
                        <span class="icon fa fa-map-marker"></span>32 BellSouth,
                        Harley Street <br />
                        Florida 33968
                      </li>
                      <li>
                        <span class="icon fa fa-phone"></span>
                        <a href="tel:+12345678900">+(1) 234 567 8900 </a>
                      </li>
                      <li>
                        <span class="icon fa fa-envelope"></span>
                        <a href="mailto:support@PawFund.com">
                          support@PawFund.com
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
                <!--Footer Column-->
                <div class="footer-column col-md-6 col-sm-6 col-xs-12">
                  <div class="footer-widget subscribe-widget">
                    <h2>Subsrribe to RSS</h2>
                    <div class="text">
                      One jeepers along while do accord under useful much darn.
                    </div>
                    <div class="subscribe-form">
                      <form
                        method="post"
                        action="https://www.shmai.com/preview/PawFund-html/contact.html"
                      >
                        <div class="form-group">
                          <input
                            type="email"
                            name="email"
                            value=""
                            placeholder="Email"
                            required=""
                          />
                        </div>
                        <div class="form-group">
                          <button
                            type="submit"
                            class="theme-btn btn-style-four"
                          >
                            subscribe now
                          </button>
                        </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer-bottom">
          <div class="copyright">
            Copyrights 2021 <span>PawFund</span> • All Rights Reserved.
          </div>
        </div>
      </div>
    </footer>
    <!--End Main Footer-->

    <!-- ==================================== get pet shelterid moi ======================= -->

    <script>
      $(document).ready(function () {
        // Extract shelterId from URL query string
        const urlParams = new URLSearchParams(window.location.search);
        const shelterId = urlParams.get("shelterId");

        if (shelterId) {
          // Load Shelter Details
          loadShelterDetails(shelterId);

          // Load Pets List
          loadPetList(shelterId);
        } else {
          console.error("No shelterId provided in the URL.");
        }
      });

      function loadShelterDetails(shelterId) {
        const shelterApiEndpoint = `https://localhost:7063/api/Shelter?shelterId=${shelterId}`;

        $.ajax({
          url: shelterApiEndpoint,
          method: "GET",
          dataType: "json",
          success: function (response) {
            if (response && response.data && response.data.length > 0) {
              const shelter = response.data[0];

              // Populate the shelter details section
              $("#shelter-details").html(`
                    <div class="auto-container">
                        <div class="row clearfix">
                            <section class="detail-desc">
                                <div class="container white-shadow">
                                    <div class="row bottom-mrg">
                                        <div class="col-md-8 col-sm-8">
                                            <div class="detail-desc-caption">
                                                <h4>${shelter.shelterName}</h4>
                                                <p>${shelter.description}</p>
                                                <ul>
                                                    <li><i class="fa fa-user"></i><span>${shelter.userName}</span></li>
                                                    <li><i class="fa fa-calendar"></i><span>${shelter.shelterDate}</span></li>
                                                </ul>
                                            </div>
                                        </div>
                                        <div class="col-md-4 col-sm-4">
                                            <div class="get-touch">
                                                <h4>Contact</h4>
                                                <ul>
                                                    <li><i class="fa fa-map-marker"></i><span>${shelter.address}</span></li>
                                                    <li><i class="fa fa-phone"></i><span>${shelter.phoneNumber}</span></li>
                                                    <li><i class="fa fa-envelope"></i><span>${shelter.email}</span></li>
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>
                        </div>
                    </div>
                `);
            } else {
              console.error("No shelter details found.");
            }
          },
          error: function (xhr, status, error) {
            console.error("Error fetching shelter details:", error);
          },
        });
      }

      function loadPetList(shelterId) {
        const petApiEndpoint = `https://localhost:7063/api/Pet/${shelterId}`;

        $.ajax({
          url: petApiEndpoint,
          method: "GET",
          dataType: "json",
          success: function (response) {
            const petContainer = $("#pet-list .row"); // Container for pet cards

            if (response && response.length > 0) {
              // Clear existing content
              petContainer.empty();

              // Iterate through the pets and append to the container
              response.forEach((pet) => {
                petContainer.append(`
                        <div class="col-lg-4 col-md-6 col-sm-12">
                            <div class="member">
                                <h4 class="wow fadeInDown">${pet.name}</h4>
                                <div class="image">
                                    <img src="${
                                      pet.images.length > 0
                                        ? pet.images[0]
                                        : "images/home_5/pet-profile2.png"
                                    }"
                                         alt="image of pet"
                                         title="pet"
                                         class="img-fluid customer">
                                </div>
                                <div class="content" >
                                    <ul>
                                        <li><i class="fas fa-paw"></i>  ${
                                          pet.ages
                                        }</li>
                                        <li><i class="fas fa-paw"></i>  ${
                                          pet.gender ? "Male" : "Female"
                                        }</li>
                                        <li><i class="fas fa-paw"></i>  ${
                                          pet.breed
                                        }</li>
                                        <li><i class="fas fa-paw"></i>  ${
                                          pet.description
                                        }</li>
                                    </ul>
                                    <div class="button wow fadeInUp">
                                        <a href="pet_details.html?petId=${
                                          pet.petId
                                        }" style="color: black;" class="btn main" title="See Me">
                                           See me <i class="fas fa-paw"></i>
                                        </a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    `);
              });
            } else {
              petContainer.html("<p>No pets available for this shelter.</p>");
            }
          },
          error: function (xhr, status, error) {
            console.error("Error fetching pet list:", error);
          },
        });
      }
    </script>

    <!-- phan trang get pet by shelter -->

    <!-- phân quyền nhìn thấy dashboard -->
    <script>
      $(document).ready(function () {
        const token = sessionStorage.getItem("token"); // Lấy token từ sessionStorage

        if (token) {
          const payload = parseJWT(token); // Giải mã token

          if (payload) {
            const userRole = payload.role;
            const currentTime = Math.floor(Date.now() / 1000);

            // Kiểm tra xem token có hết hạn không
            if (payload.exp < currentTime) {
              sessionStorage.removeItem("token"); // Xóa token nếu hết hạn
              alert("Your session has expired. Please log in again.");
              window.location.href = "login.html"; // Chuyển hướng
              return;
            }

            // Hiển thị menu "management" dựa trên vai trò (role)
            if (userRole === "Admin") {
              $("#management").css("display", "block"); // Hiển thị menu
              $("#management a").attr("href", "dashboard.html"); // Gán link phù hợp
            } else if (userRole === "Shelter_Staff") {
              $("#management").css("display", "block"); // Hiển thị menu
              $("#management a").attr("href", "manage_shelter.html"); // Gán link phù hợp
            } else {
              $("#management").css("display", "none"); // Ẩn menu nếu không phải role hợp lệ
            }
          } else {
            console.error("Invalid token payload.");
            $("#management").css("display", "none"); // Ẩn menu nếu token payload không hợp lệ
          }
        } else {
          console.error("Token not found in sessionStorage.");
          $("#management").css("display", "none"); // Ẩn menu nếu không có token
        }
      });

      // Hàm giải mã JWT token
      function parseJWT(token) {
        try {
          const base64Url = token.split(".")[1]; // Lấy payload (phần thứ 2) của token
          const base64 = base64Url.replace(/-/g, "+").replace(/_/g, "/");
          const jsonPayload = decodeURIComponent(
            atob(base64)
              .split("")
              .map(function (c) {
                return "%" + ("00" + c.charCodeAt(0).toString(16)).slice(-2);
              })
              .join("")
          );
          return JSON.parse(jsonPayload); // Trả về object JSON
        } catch (e) {
          console.error("Error decoding JWT:", e);
          return null;
        }
      }
    </script>
  </body>
</html>
